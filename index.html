<!DOCTYPE html>
<html>
<head>
  <title>Reverse Bill Generator</title>
</head>
<body style="font-family: Arial; padding: 20px; background: #f5f5f5;">
  <div style="max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 10px;">
    <h2 style="text-align: center;">Reverse Bill Generator</h2>

    <button onclick="addItem()" style="padding: 10px 15px; background: green; color: white; border: none; border-radius: 5px;">+ Add Item</button>
    <button onclick="generateBill()" style="padding: 10px 15px; background: blue; color: white; border: none; border-radius: 5px; margin-left: 10px;">Generate Bill</button>

    <div id="itemContainer" style="margin-top: 20px;"></div>
    <div id="billOutput" style="margin-top: 30px;"></div>
  </div>

  <script>
    let itemId = 0;
    function addItem() {
      const div = document.createElement("div");
      div.style = "margin-bottom: 10px; display: flex; gap: 10px; align-items: center;";
      div.innerHTML = `
        <select class="product" style="padding: 5px;">
          <option value="Suit" data-hsn="5407" data-unit="pc">Suit</option>
          <option value="Saree" data-hsn="5407" data-unit="pc">Saree</option>
          <option value="Fabric" data-hsn="5408" data-unit="mtr">Fabric</option>
        </select>
        <input type="number" placeholder="Qty" class="qty" style="width: 60px;" min="1">
        <input type="number" placeholder="Rate (incl. GST)" class="rate" style="width: 120px;" step="0.01" min="0">
        <button onclick="this.parentElement.remove()" style="padding: 5px 10px; background: red; color: white;">Remove</button>
      `;
      document.getElementById("itemContainer").appendChild(div);
    }

    function generateBill() {
      const items = document.querySelectorAll("#itemContainer > div");
      const groups = {};

      for (let item of items) {
        const product = item.querySelector(".product").value;
        const hsn = item.querySelector(".product").selectedOptions[0].dataset.hsn;
        const unit = item.querySelector(".product").selectedOptions[0].dataset.unit;
        const qty = parseInt(item.querySelector(".qty").value);
        const rateIncl = parseFloat(item.querySelector(".rate").value);

        if (!qty || !rateIncl || qty <= 0 || rateIncl <= 0) {
          alert("Please enter valid quantity and rate for all items.");
          return;
        }

        const key = `${product}_${rateIncl}`;
        if (!groups[key]) {
          groups[key] = { product, hsn, unit, qty: 0, rateIncl };
        }
        groups[key].qty += qty;
      }

      let rows = '';
      let totalTaxable = 0, totalCGST = 0, totalSGST = 0, grandTotal = 0;

      for (let key in groups) {
        const { product, hsn, unit, qty, rateIncl } = groups[key];
        const rateExcl = +(rateIncl / 1.05).toFixed(2);
        const totalIncl = +(qty * rateIncl).toFixed(2);
        const totalExcl = +(qty * rateExcl).toFixed(2);
        const cgst = +(totalExcl * 0.025).toFixed(2);
        const sgst = cgst;

        rows += `
          <tr>
            <td style="border: 1px solid #ccc; padding: 8px;">${product}</td>
            <td style="border: 1px solid #ccc; padding: 8px;">${hsn}</td>
            <td style="border: 1px solid #ccc; padding: 8px;">₹${rateExcl.toFixed(2)}</td>
            <td style="border: 1px solid #ccc; padding: 8px;">${qty}</td>
            <td style="border: 1px solid #ccc; padding: 8px;">${unit}</td>
            <td style="border: 1px solid #ccc; padding: 8px;">₹${totalIncl.toFixed(2)}</td>
          </tr>
        `;

        totalTaxable += totalExcl;
        totalCGST += cgst;
        totalSGST += sgst;
        grandTotal += totalIncl;
      }

      const billHTML = `
        <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
          <thead>
            <tr style="background: #f0f0f0;">
              <th style="border: 1px solid #ccc; padding: 8px;">Description of Goods</th>
              <th style="border: 1px solid #ccc; padding: 8px;">HSN Code</th>
              <th style="border: 1px solid #ccc; padding: 8px;">Rate</th>
              <th style="border: 1px solid #ccc; padding: 8px;">Qty</th>
              <th style="border: 1px solid #ccc; padding: 8px;">Unit</th>
              <th style="border: 1px solid #ccc; padding: 8px;">Split Amount</th>
            </tr>
          </thead>
          <tbody>${rows}</tbody>
        </table>

        <table style="width: 100%; margin-top: 20px; font-size: 16px;">
          <tr><td><strong>Taxable Amount</strong></td><td style="text-align: right;">₹${totalTaxable.toFixed(2)}</td></tr>
          <tr><td>2.5% Tax Amount</td><td style="text-align: right;">₹${totalCGST.toFixed(2)}</td></tr>
          <tr><td>2.5% Tax Amount</td><td style="text-align: right;">₹${totalSGST.toFixed(2)}</td></tr>
          <tr><td><strong>Grand Total</strong></td><td style="text-align: right;"><strong>₹${grandTotal.toFixed(2)}</strong></td></tr>
        </table>
      `;

      document.getElementById("billOutput").innerHTML = billHTML;
    }
  </script>
</body>
</html>

     
      
      

